{% extends "empleados/empleadosMaster.jinja" %}
{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}


<div>
    <form action="./NuevoProducto" id="form-nuevo-producto" method="post" class="to-left position-absolute p-5 d-flex flex-column justify-content-center align-items-center h-100" style="top: 0; bottom: 0; left: 0; right: 0;" enctype="multipart/form-data">

      <div class="mb-3">
        <p>Nuevo Producto</p>
      </div>
      <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
        <label for="IdProducto" class="form-label">ID del Producto</label>
        <input type="text" class="form-control" id="IdProducto" name="IdProducto" value="">
      </div>

      <div class="d-flex flex-column justify-content-between align-items-center h-100 w-100">
        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Nombre" class="form-label">Nombre</label>
          <input type="text" class="form-control" id="Nombre" name="Nombre" value="">
        </div>

        <div  class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Imagen" class="form-label w-100">Imagen</label>
          <input  type="file" class="form-control-file" id="Imagen" name="Imagen[]" multiple accept="image/png, image/jpeg, image/jpg" value="">
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
            <label for="Descripcion" class="form-label">Descripcion</label>
            <input style="height: 200px;" type="text" class="form-control" id="Descripcion" name="Descripcion" value="">
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Cantidad" class="form-label">Cantidad</label>
          <input type="number" class="form-control" id="Cantidad" name="Cantidad" value="">
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
            <label for="Precio" class="form-label">Precio</label>
            <input type="number" inputmode="numeric" class="form-control" id="Precio" name="Precio" value="">
        </div>
        <label for="NombreColor" class="col-form-label ">Color</label>
        <div class="mb-3 w-100 form-group d-flex align-items-center">
            <div class="col-md-6 d-flex justify-content-center" style="margin-right: 5%;">
                <input type="text" class="form-control border" id="NombreColor1" name="NombreColor" value="">
            </div>            
            <div style="flex: auto; margin-left: 10px;">
                <input type="color" name="colorRGB" id="colorRGB1" value="" class="input-color">
            </div>
         
            <div class="col-md-6 d-flex justify-content-end">
                <button type="button" class="btn btn-outline-danger" onclick="agregarCampos()" style="font-size: 12px;" >Agregar</button>
            </div>    
        </div>

        <div class="form-group">
          <label for="colorName">Nombre del color:</label>
          <input type="text" class="form-control" id="colorName" name="colorName">
          <label for="colorHex">Color hexadecimal:</label>
          <input type="color" class="form-control" id="colorHex" name="colorHex">
        </div>
        <div id="colorFields"></div>
        <button type="button" class="btn btn-primary" onclick="addColorField()">Añadir otro color</button>
        <br><br>

        <div class="mb-3  form-group" id="contenedorCampos"></div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Categoria" class="form-label">Categoría</label>
          <select class="form-control" id="Categoria" name="Categoria">
            <option value="Ojos">Ojos</option>
            <option value="Labios">Labios</option>
            <option value="Piel">Piel</option>
            <option value="SkinCare">SkinCare</option>
            <option value="Accesorios">Accesorios</option>
          </select>
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Recomendacion" class="form-label">Recomendacion</label>
          <input type="text" class="form-control" id="Recomendacion" name="Recomendacion" value="">
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="Marca" class="form-label">Marca</label>
          <select class="form-control" id="Marca" name="Marca">
            <option value="Maybelline">Maybelline</option>
            <option value="L'Oréal">L'Oréal</option>
            <option value="Mary kay">Mary kay</option>
            <option value="MAC">MAC</option>
            <option value="Sephora">Sephora</option>
          </select>
        </div>

        <div class="mb-3 w-100 form-group d-flex align-items-center flex-column">
          <label for="TipoPiel" class="form-label">Tipo de piel</label>
          <select class="form-control" id="TipoPiel" name="TipoPiel">
              <option value="1">Normal</option>
              <option value="2">Seca</option>
              <option value="3">Grasa</option>
              <option value="4">Mixta</option>
              <option value="5">Acné</option>
              <option value="6">Sensible</option>
          </select>
        </div>
        
        <button type="submit" class="btn btn-secondary w-50">Submit</button>
      </div>

    </form>
</div>

<script>
const form = document.getElementById('form-nuevo-producto');

form.addEventListener('submit', function(event) {
  event.preventDefault(); // Evita que el formulario se envíe automáticamente

  if (confirm('¿Estás seguro de ingresar los datos del producto?')) {
    // Si el usuario confirma, envía el formulario
    this.submit();
  }
});

function addColorField() {
  var div = document.createElement('div');
  div.className = 'form-group';
  div.innerHTML = '<label for="colorName">Nombre del color:</label><input type="text" class="form-control" name="colorName[]"><label for="colorHex">Color hexadecimal:</label><input type="color" class="form-control" name="colorHex[]">';
  document.getElementById('colorFields').appendChild(div);
}

var numColors = 2;

function agregarCampos() {
    if(numColors < 7){
      // Obtener el elemento donde se agregarán los nuevos campos de entrada
      var contenedor = document.getElementById("contenedorCampos");
    
      var nuevoDiv = document.createElement("div");
      nuevoDiv.className = "mb-3 w-100 form-group d-flex align-items-center"

      // Crear los nuevos elementos de entrada de texto y color
      var contenedorLabel = document.createElement("div");
      contenedorLabel.className = "col-md-6 d-flex justify-content-center";
      contenedorLabel.style = "margin-right: 5%;"

      var nuevoInputText = document.createElement("input");
      nuevoInputText.type = "text";
      nuevoInputText.name = "NombreColor" + numColors;
      nuevoInputText.className = "form-control border";
      nuevoInputText.value = "";

      contenedorLabel.appendChild(nuevoInputText);

      var contenedorColor = document.createElement("div");
      contenedorColor.style = "flex: auto; margin-left: 10px;";
    
      var nuevoInputColor = document.createElement("input");
      nuevoInputColor.type = "color";
      nuevoInputColor.name = "colorRGB" + numColors;
      nuevoInputColor.className = "input-color";
      nuevoInputColor.value = "";

      contenedorColor.appendChild(nuevoInputColor);
    
      // Agregar los nuevos elementos al contenedor
      nuevoDiv.appendChild(contenedorLabel);
      nuevoDiv.appendChild(contenedorColor);
      contenedor.appendChild(nuevoDiv);
      numColors += 1;
    }
  }
</script>

{% endblock %}